<UserControl
    x:Class="SDProfileManager.Views.ProfilePaneView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    AllowDrop="True"
    DragOver="OnProfileDragOver"
    DragLeave="OnProfileDragLeave"
    Drop="OnProfileDrop">

    <Border x:Name="PaneRootBorder"
            BorderBrush="{StaticResource SubtleBorderBrush}"
            BorderThickness="1"
            CornerRadius="{StaticResource PaneCornerRadius}"
            Padding="12">
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="{StaticResource PaneBgTop}" Offset="0"/>
                <GradientStop Color="{StaticResource PaneBgBottom}" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        <Grid RowSpacing="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Pane header: title + buttons -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Spacing="3" VerticalAlignment="Top">
                    <TextBlock x:Name="PaneTitleText"
                               FontSize="16" FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                    <TextBlock x:Name="PaneSubtitleText"
                               FontSize="12"
                               MaxLines="1"
                               TextTrimming="CharacterEllipsis"
                               Foreground="{StaticResource TextSecondaryBrush}"/>
                    <Border x:Name="ModeChip"
                            Visibility="Collapsed"
                            HorizontalAlignment="Left"
                            Background="#402D5EFF"
                            BorderBrush="#669BC3FF"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="6,2,6,2">
                        <TextBlock Text="Single Profile Mode"
                                   FontSize="10"
                                   FontWeight="SemiBold"
                                   Foreground="#FFD7E7FF"/>
                    </Border>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="6">
                    <Button x:Name="OpenButton"
                            Content="Open"
                            Style="{StaticResource PaneButtonStyle}"/>
                    <Button x:Name="CloseButton"
                            Content="Close"
                            Style="{StaticResource PaneButtonStyle}"/>
                    <Button x:Name="SplitViewButton"
                            Content="Split View"
                            Style="{StaticResource PaneButtonStyle}"/>
                    <Button x:Name="NewEmptyButton"
                            Content="New Empty"
                            Style="{StaticResource PaneButtonStyle}"
                            Visibility="Collapsed"/>
                </StackPanel>
            </Grid>

            <!-- Controls strip -->
            <ScrollViewer Grid.Row="1"
                          HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Disabled"
                          HorizontalScrollMode="Auto">
                <StackPanel x:Name="ControlsPanel"
                            Orientation="Horizontal"
                            Spacing="8"
                            Padding="0,1"/>
            </ScrollViewer>

            <!-- Preflight summary (populated from code-behind) -->
            <StackPanel x:Name="PreflightPanel" Grid.Row="2" Spacing="6"/>

            <!-- Content area: deck or empty state -->
            <Grid Grid.Row="3">
                <!-- Empty state -->
                <Border x:Name="EmptyState"
                        Background="#FF333336"
                        BorderBrush="#1FFFFFFF"
                        BorderThickness="1"
                        CornerRadius="14">
                    <StackPanel HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Spacing="10">
                        <FontIcon Glyph="&#xF0E2;"
                                  FontSize="28"
                                  Foreground="{StaticResource TextDimBrush}"
                                  HorizontalAlignment="Center"/>
                        <TextBlock x:Name="EmptyStateText"
                                   FontSize="13"
                                   TextAlignment="Center"
                                   Foreground="{StaticResource TextSecondaryBrush}"/>
                    </StackPanel>
                </Border>

                <!-- Deck canvas -->
                <Border x:Name="DeckStage"
                        Background="{StaticResource DeckStageBgBrush}"
                        BorderBrush="#0FFFFFFF"
                        BorderThickness="1"
                        CornerRadius="14"
                        Margin="0,2,0,0"
                        Padding="8"
                        Visibility="Collapsed">
                    <ScrollViewer HorizontalScrollBarVisibility="Auto"
                                  VerticalScrollBarVisibility="Auto"
                                  HorizontalScrollMode="Auto"
                                  VerticalScrollMode="Auto"
                                  ZoomMode="Disabled">
                        <Grid x:Name="DeckContainer"/>
                    </ScrollViewer>
                </Border>
            </Grid>
        </Grid>
    </Border>
</UserControl>
